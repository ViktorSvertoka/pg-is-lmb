{"version":3,"file":"commonHelpers3.js","sources":["../src/js/page-2.js"],"sourcesContent":["const elements = {\n  list: document.querySelector('.js-lotr-list'),\n};\n\nlet page = 1;\nconst limit = 10;\n\nlet loading = false;\n\nwindow.addEventListener('scroll', handleScroll);\n\nasync function handleScroll() {\n  if (\n    window.innerHeight + window.scrollY >= document.body.offsetHeight &&\n    !loading\n  ) {\n    try {\n      loading = true;\n      page += 1;\n      const data = await serviceMovie(page, limit);\n\n      elements.list.insertAdjacentHTML('beforeend', createMarkup(data.docs));\n\n      if (page >= data.totalPages) {\n      }\n    } catch (error) {\n      console.error(error);\n    } finally {\n      loading = false;\n    }\n  }\n}\n\nasync function serviceMovie(page = 1, limit = 10) {\n  const BASE_URL = 'https://the-one-api.dev/v2/';\n  const END_POINT = 'character';\n  const BEARER_TOKEN = 'fVhH6jhxy5LdB6Ie2Y7P';\n\n  const params = new URLSearchParams({\n    page,\n    limit,\n  });\n\n  const response = await fetch(`${BASE_URL}${END_POINT}?${params}`, {\n    headers: {\n      Authorization: `Bearer ${BEARER_TOKEN}`,\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(response.statusText || 'Error');\n  }\n\n  const data = await response.json();\n\n  return {\n    docs: data.docs,\n    page: data.page,\n    totalPages: Math.ceil(data.total / limit),\n  };\n}\n\nasync function initialize() {\n  try {\n    const data = await serviceMovie(page, limit);\n\n    elements.list.insertAdjacentHTML('afterbegin', createMarkup(data.docs));\n\n    if (page < data.totalPages) {\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n\ninitialize();\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ name, race }) => `\n    <li class=\"card-list\">\n        <h2>${name}</h2>\n        <p>${race}</p>\n    </li>\n    `\n    )\n    .join('');\n}\n"],"names":["elements","page","limit","loading","handleScroll","data","serviceMovie","createMarkup","error","BASE_URL","END_POINT","BEARER_TOKEN","params","response","initialize","arr","name","race"],"mappings":"uFAAA,MAAMA,EAAW,CACf,KAAM,SAAS,cAAc,eAAe,CAC9C,EAEA,IAAIC,EAAO,EACX,MAAMC,EAAQ,GAEd,IAAIC,EAAU,GAEd,OAAO,iBAAiB,SAAUC,CAAY,EAE9C,eAAeA,GAAe,CAC5B,GACE,OAAO,YAAc,OAAO,SAAW,SAAS,KAAK,cACrD,CAACD,EAED,GAAI,CACFA,EAAU,GACVF,GAAQ,EACR,MAAMI,EAAO,MAAMC,EAAaL,EAAMC,CAAK,EAE3CF,EAAS,KAAK,mBAAmB,YAAaO,EAAaF,EAAK,IAAI,CAAC,EAEjEJ,GAAQI,EAAK,UAElB,OAAQG,EAAO,CACd,QAAQ,MAAMA,CAAK,CACzB,QAAc,CACRL,EAAU,EACX,CAEL,CAEA,eAAeG,EAAaL,EAAO,EAAGC,EAAQ,GAAI,CAChD,MAAMO,EAAW,8BACXC,EAAY,YACZC,EAAe,uBAEfC,EAAS,IAAI,gBAAgB,CACjC,KAAAX,EACA,MAAAC,CACJ,CAAG,EAEKW,EAAW,MAAM,MAAM,GAAGJ,CAAQ,GAAGC,CAAS,IAAIE,CAAM,GAAI,CAChE,QAAS,CACP,cAAe,UAAUD,CAAY,EACtC,CACL,CAAG,EAED,GAAI,CAACE,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,YAAc,OAAO,EAGhD,MAAMR,EAAO,MAAMQ,EAAS,OAE5B,MAAO,CACL,KAAMR,EAAK,KACX,KAAMA,EAAK,KACX,WAAY,KAAK,KAAKA,EAAK,MAAQH,CAAK,CAC5C,CACA,CAEA,eAAeY,GAAa,CAC1B,GAAI,CACF,MAAMT,EAAO,MAAMC,EAAaL,EAAMC,CAAK,EAE3CF,EAAS,KAAK,mBAAmB,aAAcO,EAAaF,EAAK,IAAI,CAAC,EAElEJ,EAAOI,EAAK,UAEjB,OAAQG,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH,CAEAM,IAEA,SAASP,EAAaQ,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CAAE,KAAAC,EAAM,KAAAC,CAAI,IAAO;AAAA;AAAA,cAEZD,CAAI;AAAA,aACLC,CAAI;AAAA;AAAA,KAGZ,EACA,KAAK,EAAE,CACZ"}