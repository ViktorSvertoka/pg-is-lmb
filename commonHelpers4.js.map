{"version":3,"file":"commonHelpers4.js","sources":["../src/js/page-3.js"],"sourcesContent":["const elements = {\n  list: document.querySelector('.js-lotr-list'),\n  pagination: document.querySelector('.js-pagination'),\n};\n\nlet currentPage = 1;\nconst itemsPerPage = 10;\nlet totalPages = 0;\n\nelements.pagination.addEventListener('click', handlePaginationClick);\n\nasync function handlePaginationClick(event) {\n  if (event.target.tagName === 'BUTTON') {\n    const requestedPage = parseInt(event.target.dataset.page);\n\n    if (requestedPage && requestedPage !== currentPage) {\n      currentPage = requestedPage;\n      await loadData();\n    }\n  }\n}\n\nasync function loadData() {\n  try {\n    const data = await serviceMovie(currentPage, itemsPerPage);\n\n    elements.list.innerHTML = createMarkup(data.docs);\n\n    totalPages = data.totalPages;\n\n    updatePaginationButtons();\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function serviceMovie(page = 1, limit = 10) {\n  const BASE_URL = 'https://the-one-api.dev/v2/';\n  const END_POINT = 'character';\n  const BEARER_TOKEN = 'fVhH6jhxy5LdB6Ie2Y7P';\n\n  const params = new URLSearchParams({\n    page,\n    limit,\n  });\n\n  const response = await fetch(`${BASE_URL}${END_POINT}?${params}`, {\n    headers: {\n      Authorization: `Bearer ${BEARER_TOKEN}`,\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(response.statusText || 'Error');\n  }\n\n  const data = await response.json();\n\n  return {\n    docs: data.docs,\n    totalPages: Math.ceil(data.total / limit),\n  };\n}\n\nasync function initialize() {\n  await loadData();\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ name, race }) => `\n      <li class=\"card-list\">\n        <h2>${name}</h2>\n        <p>${race != null ? race : 'unknown'}</p>\n      </li>\n    `\n    )\n    .join('');\n}\n\nfunction updatePaginationButtons() {\n  elements.pagination.innerHTML = '';\n\n  const maxButtonsToShow = 10;\n  const startPage = Math.max(currentPage - Math.floor(maxButtonsToShow / 2), 1);\n  const endPage = Math.min(startPage + maxButtonsToShow - 1, totalPages);\n\n  if (startPage > 1) {\n    const firstButton = document.createElement('button');\n    firstButton.textContent = '1';\n    firstButton.dataset.page = '1';\n    elements.pagination.appendChild(firstButton);\n  }\n\n  for (let i = startPage; i <= endPage; i++) {\n    const button = document.createElement('button');\n    button.textContent = i;\n    button.dataset.page = i;\n    elements.pagination.appendChild(button);\n  }\n\n  if (endPage < totalPages) {\n    const lastButton = document.createElement('button');\n    lastButton.textContent = totalPages.toString();\n    lastButton.dataset.page = totalPages.toString();\n    elements.pagination.appendChild(lastButton);\n  }\n}\n\ninitialize();\n"],"names":["elements","currentPage","itemsPerPage","totalPages","handlePaginationClick","event","requestedPage","loadData","data","serviceMovie","createMarkup","updatePaginationButtons","error","page","limit","BASE_URL","END_POINT","BEARER_TOKEN","params","response","initialize","arr","name","race","maxButtonsToShow","startPage","endPage","firstButton","i","button","lastButton"],"mappings":"uFAAA,MAAMA,EAAW,CACf,KAAM,SAAS,cAAc,eAAe,EAC5C,WAAY,SAAS,cAAc,gBAAgB,CACrD,EAEA,IAAIC,EAAc,EAClB,MAAMC,EAAe,GACrB,IAAIC,EAAa,EAEjBH,EAAS,WAAW,iBAAiB,QAASI,CAAqB,EAEnE,eAAeA,EAAsBC,EAAO,CAC1C,GAAIA,EAAM,OAAO,UAAY,SAAU,CACrC,MAAMC,EAAgB,SAASD,EAAM,OAAO,QAAQ,IAAI,EAEpDC,GAAiBA,IAAkBL,IACrCA,EAAcK,EACd,MAAMC,EAAQ,EAEjB,CACH,CAEA,eAAeA,GAAW,CACxB,GAAI,CACF,MAAMC,EAAO,MAAMC,EAAaR,EAAaC,CAAY,EAEzDF,EAAS,KAAK,UAAYU,EAAaF,EAAK,IAAI,EAEhDL,EAAaK,EAAK,WAElBG,GACD,OAAQC,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH,CAEA,eAAeH,EAAaI,EAAO,EAAGC,EAAQ,GAAI,CAChD,MAAMC,EAAW,8BACXC,EAAY,YACZC,EAAe,uBAEfC,EAAS,IAAI,gBAAgB,CACjC,KAAAL,EACA,MAAAC,CACJ,CAAG,EAEKK,EAAW,MAAM,MAAM,GAAGJ,CAAQ,GAAGC,CAAS,IAAIE,CAAM,GAAI,CAChE,QAAS,CACP,cAAe,UAAUD,CAAY,EACtC,CACL,CAAG,EAED,GAAI,CAACE,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,YAAc,OAAO,EAGhD,MAAMX,EAAO,MAAMW,EAAS,OAE5B,MAAO,CACL,KAAMX,EAAK,KACX,WAAY,KAAK,KAAKA,EAAK,MAAQM,CAAK,CAC5C,CACA,CAEA,eAAeM,GAAa,CAC1B,MAAMb,EAAQ,CAChB,CAEA,SAASG,EAAaW,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CAAE,KAAAC,EAAM,KAAAC,CAAI,IAAO;AAAA;AAAA,cAEZD,CAAI;AAAA,aACLC,GAAsB,SAAS;AAAA;AAAA,KAGvC,EACA,KAAK,EAAE,CACZ,CAEA,SAASZ,GAA0B,CACjCX,EAAS,WAAW,UAAY,GAEhC,MAAMwB,EAAmB,GACnBC,EAAY,KAAK,IAAIxB,EAAc,KAAK,MAAMuB,EAAmB,CAAC,EAAG,CAAC,EACtEE,EAAU,KAAK,IAAID,EAAYD,EAAmB,EAAGrB,CAAU,EAErE,GAAIsB,EAAY,EAAG,CACjB,MAAME,EAAc,SAAS,cAAc,QAAQ,EACnDA,EAAY,YAAc,IAC1BA,EAAY,QAAQ,KAAO,IAC3B3B,EAAS,WAAW,YAAY2B,CAAW,CAC5C,CAED,QAASC,EAAIH,EAAWG,GAAKF,EAASE,IAAK,CACzC,MAAMC,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,YAAcD,EACrBC,EAAO,QAAQ,KAAOD,EACtB5B,EAAS,WAAW,YAAY6B,CAAM,CACvC,CAED,GAAIH,EAAUvB,EAAY,CACxB,MAAM2B,EAAa,SAAS,cAAc,QAAQ,EAClDA,EAAW,YAAc3B,EAAW,WACpC2B,EAAW,QAAQ,KAAO3B,EAAW,SAAQ,EAC7CH,EAAS,WAAW,YAAY8B,CAAU,CAC3C,CACH,CAEAV,EAAY"}