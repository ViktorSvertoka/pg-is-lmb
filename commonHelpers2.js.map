{"version":3,"file":"commonHelpers2.js","sources":["../src/js/page-1.js"],"sourcesContent":["const elements = {\n  list: document.querySelector('.js-lotr-list'),\n  btnLoad: document.querySelector('.js-load-more'),\n};\n\nlet page = 1;\nconst limit = 10;\n\nelements.btnLoad.addEventListener('click', handlerLoadMore);\n\nasync function handlerLoadMore() {\n  try {\n    page += 1;\n    const data = await serviceMovie(page, limit);\n\n    elements.list.insertAdjacentHTML('beforeend', createMarkup(data.docs));\n\n    if (page >= data.totalPages) {\n      elements.btnLoad.classList.add('js-hidden');\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function serviceMovie(page = 1, limit = 10) {\n  const BASE_URL = 'https://the-one-api.dev/v2/';\n  const END_POINT = 'character';\n  const BEARER_TOKEN = 'fVhH6jhxy5LdB6Ie2Y7P';\n\n  const params = new URLSearchParams({\n    page,\n    limit,\n  });\n\n  const response = await fetch(`${BASE_URL}${END_POINT}?${params}`, {\n    headers: {\n      Authorization: `Bearer ${BEARER_TOKEN}`,\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(response.statusText || 'Error');\n  }\n\n  const data = await response.json();\n\n  return {\n    docs: data.docs,\n    page: data.page,\n    totalPages: Math.ceil(data.total / limit),\n  };\n}\n\nasync function initialize() {\n  try {\n    const data = await serviceMovie(page, limit);\n\n    elements.list.insertAdjacentHTML('afterbegin', createMarkup(data.docs));\n\n    if (page < data.totalPages) {\n      elements.btnLoad.classList.remove('js-hidden');\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n\ninitialize();\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ name, race }) => `\n    <li class=\"card-list\">\n        <h2>${name}</h2>\n        <p>${race}</p>\n    </li>\n    `\n    )\n    .join('');\n}\n"],"names":["elements","page","limit","handlerLoadMore","data","serviceMovie","createMarkup","error","BASE_URL","END_POINT","BEARER_TOKEN","params","response","initialize","arr","name","race"],"mappings":"uFAAA,MAAMA,EAAW,CACf,KAAM,SAAS,cAAc,eAAe,EAC5C,QAAS,SAAS,cAAc,eAAe,CACjD,EAEA,IAAIC,EAAO,EACX,MAAMC,EAAQ,GAEdF,EAAS,QAAQ,iBAAiB,QAASG,CAAe,EAE1D,eAAeA,GAAkB,CAC/B,GAAI,CACFF,GAAQ,EACR,MAAMG,EAAO,MAAMC,EAAaJ,EAAMC,CAAK,EAE3CF,EAAS,KAAK,mBAAmB,YAAaM,EAAaF,EAAK,IAAI,CAAC,EAEjEH,GAAQG,EAAK,YACfJ,EAAS,QAAQ,UAAU,IAAI,WAAW,CAE7C,OAAQO,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH,CAEA,eAAeF,EAAaJ,EAAO,EAAGC,EAAQ,GAAI,CAChD,MAAMM,EAAW,8BACXC,EAAY,YACZC,EAAe,uBAEfC,EAAS,IAAI,gBAAgB,CACjC,KAAAV,EACA,MAAAC,CACJ,CAAG,EAEKU,EAAW,MAAM,MAAM,GAAGJ,CAAQ,GAAGC,CAAS,IAAIE,CAAM,GAAI,CAChE,QAAS,CACP,cAAe,UAAUD,CAAY,EACtC,CACL,CAAG,EAED,GAAI,CAACE,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,YAAc,OAAO,EAGhD,MAAMR,EAAO,MAAMQ,EAAS,OAE5B,MAAO,CACL,KAAMR,EAAK,KACX,KAAMA,EAAK,KACX,WAAY,KAAK,KAAKA,EAAK,MAAQF,CAAK,CAC5C,CACA,CAEA,eAAeW,GAAa,CAC1B,GAAI,CACF,MAAMT,EAAO,MAAMC,EAAaJ,EAAMC,CAAK,EAE3CF,EAAS,KAAK,mBAAmB,aAAcM,EAAaF,EAAK,IAAI,CAAC,EAElEH,EAAOG,EAAK,YACdJ,EAAS,QAAQ,UAAU,OAAO,WAAW,CAEhD,OAAQO,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH,CAEAM,IAEA,SAASP,EAAaQ,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CAAE,KAAAC,EAAM,KAAAC,CAAI,IAAO;AAAA;AAAA,cAEZD,CAAI;AAAA,aACLC,CAAI;AAAA;AAAA,KAGZ,EACA,KAAK,EAAE,CACZ"}