{"version":3,"file":"commonHelpers2.js","sources":["../src/js/page-1.js"],"sourcesContent":["const elements = {\n  list: document.querySelector('.js-movie-list'),\n  btnLoad: document.querySelector('.js-load-more'),\n};\n\nlet page = 499;\n\nelements.btnLoad.addEventListener('click', handlerLoadMore);\n\nfunction handlerLoadMore() {\n  page += 1;\n  serviceMovie(page).then(data => {\n    elements.list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n\n    if (data.page >= 500 || data.page >= data.total_pages) {\n      elements.btnLoad.classList.replace('load-more', 'load-more-hidden');\n    }\n  });\n}\n\nfunction serviceMovie(page = 1) {\n  const BASE_URL = 'https://api.themoviedb.org/3';\n  const END_POINT = 'trending/movie/week';\n  const API_KEY = '345007f9ab440e5b86cef51be6397df1';\n\n  const params = new URLSearchParams({\n    api_key: API_KEY,\n    page,\n  });\n\n  console.log(params.toString());\n\n  return fetch(`${BASE_URL}/${END_POINT}?${params}`).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText || 'Error');\n    }\n\n    return resp.json();\n  });\n}\n\nserviceMovie()\n  .then(data => {\n    elements.list.insertAdjacentHTML('afterbegin', createMarkup(data.results));\n\n    if (data.page < data.total_pages) {\n      elements.btnLoad.classList.replace('load-more-hidden', 'load-more');\n    }\n  })\n  .catch(err => console.log(err));\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ poster_path, original_title, release_date, vote_average }) => `\n    <li class=\"movie-card\">\n        <img src=\"https://image.tmdb.org/t/p/w300${poster_path}\" alt=\"${original_title}\" />\n        <h2>${original_title}</h2>\n        <div class=\"movie-info\">\n            <p>Release Date: ${release_date}</p>\n            <p>Vote Average: ${vote_average}</p>\n        </div>\n    </li>\n    `\n    )\n    .join('');\n}\n"],"names":["elements","page","handlerLoadMore","serviceMovie","data","createMarkup","BASE_URL","END_POINT","API_KEY","params","resp","err","arr","poster_path","original_title","release_date","vote_average"],"mappings":"uFAAA,MAAMA,EAAW,CACf,KAAM,SAAS,cAAc,gBAAgB,EAC7C,QAAS,SAAS,cAAc,eAAe,CACjD,EAEA,IAAIC,EAAO,IAEXD,EAAS,QAAQ,iBAAiB,QAASE,CAAe,EAE1D,SAASA,GAAkB,CACzBD,GAAQ,EACRE,EAAaF,CAAI,EAAE,KAAKG,GAAQ,CAC9BJ,EAAS,KAAK,mBAAmB,YAAaK,EAAaD,EAAK,OAAO,CAAC,GAEpEA,EAAK,MAAQ,KAAOA,EAAK,MAAQA,EAAK,cACxCJ,EAAS,QAAQ,UAAU,QAAQ,YAAa,kBAAkB,CAExE,CAAG,CACH,CAEA,SAASG,EAAaF,EAAO,EAAG,CAC9B,MAAMK,EAAW,+BACXC,EAAY,sBACZC,EAAU,mCAEVC,EAAS,IAAI,gBAAgB,CACjC,QAASD,EACT,KAAAP,CACJ,CAAG,EAED,eAAQ,IAAIQ,EAAO,SAAU,CAAA,EAEtB,MAAM,GAAGH,CAAQ,IAAIC,CAAS,IAAIE,CAAM,EAAE,EAAE,KAAKC,GAAQ,CAC9D,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,YAAc,OAAO,EAG5C,OAAOA,EAAK,MAChB,CAAG,CACH,CAEAP,EAAc,EACX,KAAKC,GAAQ,CACZJ,EAAS,KAAK,mBAAmB,aAAcK,EAAaD,EAAK,OAAO,CAAC,EAErEA,EAAK,KAAOA,EAAK,aACnBJ,EAAS,QAAQ,UAAU,QAAQ,mBAAoB,WAAW,CAExE,CAAG,EACA,MAAMW,GAAO,QAAQ,IAAIA,CAAG,CAAC,EAEhC,SAASN,EAAaO,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CAAE,YAAAC,EAAa,eAAAC,EAAgB,aAAAC,EAAc,aAAAC,CAAc,IAAK;AAAA;AAAA,mDAEpBH,CAAW,UAAUC,CAAc;AAAA,cACxEA,CAAc;AAAA;AAAA,+BAEGC,CAAY;AAAA,+BACZC,CAAY;AAAA;AAAA;AAAA,KAItC,EACA,KAAK,EAAE,CACZ"}